<div class="create-post-page">
  <div class="create-post-card">
    <h2>Create Post</h2>

    <form (ngSubmit)="onSubmit()" enctype="multipart/form-data">
      <label for="title">Title</label>
      <input id="title" [ngModel]="title()" (ngModelChange)="title.set($event)" name="title" type="text" required
        placeholder="3-30 characters" [class.invalid]="title() !== '' && !isTitleValid()" />
      <div class="error-text" *ngIf="title() !== '' && !isTitleValid()">Title must be between 3 and 30 characters</div>

      <label for="content">Content</label>
      <textarea id="content" [ngModel]="content()" (ngModelChange)="content.set($event)" name="content" required
        placeholder="2-2500 characters" [class.invalid]="content() !== '' && !isContentValid()"></textarea>
      <div class="error-text" *ngIf="content() !== '' && !isContentValid()">Content must be between 2 and 2500
        characters</div>

      <label for="media">Media (optional, max 20MB)</label>
      <input id="media" type="file" (change)="onFileSelected($event)" accept="image/*,video/*"
        [class.invalid]="!isFileSizeValid()" />
      <div class="error-text" *ngIf="!isFileSizeValid()">File size exceeds 20MB limit</div>

      <div class="media-preview" *ngIf="previewUrl()">
        <img *ngIf="previewType() === 'image'" [src]="previewUrl()" alt="Preview" />
        <video *ngIf="previewType() === 'video'" [src]="previewUrl()" controls></video>
      </div>

      <button type="submit" class="btn-primary" [disabled]="!isFormValid()"
        [class.disabled]="!isFormValid()">Post</button>
    </form>

    <div class="back-link">
      <button (click)="onbackClick()">‚Üê Back to Feed</button>
    </div>
  </div>
</div>