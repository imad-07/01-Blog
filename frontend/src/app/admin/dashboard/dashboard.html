<!-- dashboard.component.html -->
<div class="dashboard-container">
  <div class="dashboard-header">
    <h1>ğŸ“Š Dashboard</h1>
    <p class="subtitle">Real-time overview of your platform</p>
  </div>

  <div *ngIf="loading" class="loading">
    <div class="spinner"></div>
  </div>

  <div *ngIf="!loading && dashboard" class="dashboard-content">
    <!-- Stats Grid -->
    <!-- Section: Platform Overview -->
    <h2 class="section-title">Platform Overview</h2>
    <div class="stats-grid overview-grid">
      <!-- Users Section -->
      <div class="stat-card users-card">
        <div class="stat-header">
          <h3>ğŸ‘¥ Users</h3>
          <span class="stat-badge">{{ dashboard.totalusers }}</span>
        </div>
        <div class="stat-body">
          <div class="stat-item">
            <div class="stat-label">Active</div>
            <div class="stat-value active">{{ dashboard.totalactiveusers }}</div>
            <div class="stat-progress">
              <div class="progress-bar active"
                [style.width.%]="getPercentage(dashboard.totalactiveusers, dashboard.totalusers)"></div>
            </div>
          </div>
          <div class="stat-item">
            <div class="stat-label">Suspended</div>
            <div class="stat-value suspended">{{ dashboard.totalsuspendedusers }}</div>
            <div class="stat-progress">
              <div class="progress-bar suspended"
                [style.width.%]="getPercentage(dashboard.totalsuspendedusers, dashboard.totalusers)"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Posts Section -->
      <div class="stat-card posts-card">
        <div class="stat-header">
          <h3>ğŸ“ Posts</h3>
          <span class="stat-badge">{{ dashboard.totalposts }}</span>
        </div>
        <div class="stat-body">
          <div class="stat-item">
            <div class="stat-label">Active</div>
            <div class="stat-value active">{{ dashboard.totalactiveposts }}</div>
            <div class="stat-progress">
              <div class="progress-bar active"
                [style.width.%]="getPercentage(dashboard.totalactiveposts, dashboard.totalposts)"></div>
            </div>
          </div>
          <div class="stat-item">
            <div class="stat-label">Suspended</div>
            <div class="stat-value suspended">{{ dashboard.totalsuspendedposts }}</div>
            <div class="stat-progress">
              <div class="progress-bar suspended"
                [style.width.%]="getPercentage(dashboard.totalsuspendedposts, dashboard.totalposts)"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Comments Card -->
      <div class="stat-card highlight-card">
        <div class="stat-header">
          <h3>ğŸ’¬ Comments</h3>
        </div>
        <div class="large-number">{{ dashboard.totalcomments }}</div>
      </div>
    </div>

    <!-- Section: Moderation Center -->
    <h2 class="section-title">Moderation Center</h2>
    <div class="stats-grid moderation-grid">
      <!-- Post Reports Section -->
      <div class="stat-card reports-card">
        <div class="stat-header">
          <h3>ğŸš¨ Post Reports</h3>
          <span class="stat-badge">{{ dashboard.totalreports }}</span>
        </div>
        <div class="stat-body">
          <div class="stat-item">
            <div class="stat-label">Pending</div>
            <div class="stat-value pending">{{ dashboard.totalpendingreports }}</div>
            <div class="stat-progress">
              <div class="progress-bar pending"
                [style.width.%]="getPercentage(dashboard.totalpendingreports, dashboard.totalreports)"></div>
            </div>
          </div>
          <div class="stat-item">
            <div class="stat-label">Handled</div>
            <div class="stat-value handled">{{ dashboard.totalhandledreports }}</div>
            <div class="stat-progress">
              <div class="progress-bar handled"
                [style.width.%]="getPercentage(dashboard.totalhandledreports, dashboard.totalreports)"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- User Reports Section -->
      <div class="stat-card reports-card user-reports-card">
        <div class="stat-header">
          <h3>âš ï¸ User Reports</h3>
          <span class="stat-badge">{{ dashboard.totaluserreports }}</span>
        </div>
        <div class="stat-body">
          <div class="stat-item">
            <div class="stat-label">Pending</div>
            <div class="stat-value pending">{{ dashboard.totalpendinguserreports }}</div>
            <div class="stat-progress">
              <div class="progress-bar pending"
                [style.width.%]="getPercentage(dashboard.totalpendinguserreports, dashboard.totaluserreports)"></div>
            </div>
          </div>
          <div class="stat-item">
            <div class="stat-label">Handled</div>
            <div class="stat-value handled">{{ dashboard.totalhandleduserreports }}</div>
            <div class="stat-progress">
              <div class="progress-bar handled"
                [style.width.%]="getPercentage(dashboard.totalhandleduserreports, dashboard.totaluserreports)"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Highlights Section -->
    <div class="highlights-grid">
      <!-- Top Author -->
      <div class="highlight-box author-box" *ngIf="dashboard.star">
        <div class="highlight-icon">â­</div>
        <div class="author-info">
          <div>
            <h3>Top Author</h3>
            <div class="author-name">{{dashboard.star.username }}</div>
            <div class="author-username">@{{ dashboard.star.username }}</div>
          </div>
          <img [src]="getAvatarUrl(dashboard.star.avatar)" [alt]="dashboard.star.username" class="author-avatar">
        </div>
      </div>

      <!-- Most Liked Post -->
      <div class="highlight-box post-box" *ngIf="dashboard.mostlikedpost">
        <div class="highlight-icon">ğŸ”¥</div>
        <div class="post-info">
          <div>
            <h3>Most Liked Post</h3>
            <div class="post-title">{{ dashboard.mostlikedpost.title }}</div>
            <div class="post-stats">
              <span class="stat-item">â¤ï¸ {{ dashboard.mostlikedpost.likes }}</span>
              <span class="stat-item">ğŸ’¬ {{ dashboard.mostlikedpost.cmts }}</span>
            </div>
          </div>
          <img [src]="getAvatarUrl(dashboard.mostlikedpost.author.avatar)"
            [alt]="dashboard.mostlikedpost.author.username" class="post-author-avatar">
        </div>
      </div>
    </div>

    <!-- Latest Users -->
    <div class="latest-users">
      <h2>ğŸ‘¤ Latest Users</h2>
      <div class="users-list">
        <div class="user-item" *ngFor="let user of dashboard.latestusers">
          <img [src]="getAvatarUrl(user.avatar)" [alt]="user.username" class="user-avatar">
          <div class="user-details">
            <div class="user-name">{{user.username }}</div>
            <div class="user-email">@{{ user.username }}</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>